#!/bin/bash

# count the number of entities in BI mode and projected FK format

for dir in deletes/dynamic/Comment deletes/dynamic/Comment_hasCreator_Person deletes/dynamic/Comment_isLocatedIn_Country deletes/dynamic/Comment_replyOf_Comment deletes/dynamic/Comment_replyOf_Post deletes/dynamic/Forum deletes/dynamic/Forum_containerOf_Post deletes/dynamic/Forum_hasMember_Person deletes/dynamic/Forum_hasModerator_Person deletes/dynamic/Person deletes/dynamic/Person_isLocatedIn_City deletes/dynamic/Person_knows_Person deletes/dynamic/Person_likes_Comment deletes/dynamic/Person_likes_Post deletes/dynamic/Post deletes/dynamic/Post_hasCreator_Person deletes/dynamic/Post_isLocatedIn_Country inserts/dynamic/Comment inserts/dynamic/Comment_hasCreator_Person inserts/dynamic/Comment_hasTag_Tag inserts/dynamic/Comment_isLocatedIn_Country inserts/dynamic/Comment_replyOf_Comment inserts/dynamic/Comment_replyOf_Post inserts/dynamic/Forum inserts/dynamic/Forum_containerOf_Post inserts/dynamic/Forum_hasMember_Person inserts/dynamic/Forum_hasModerator_Person inserts/dynamic/Forum_hasTag_Tag inserts/dynamic/Person inserts/dynamic/Person_hasInterest_Tag inserts/dynamic/Person_isLocatedIn_City inserts/dynamic/Person_knows_Person inserts/dynamic/Person_likes_Comment inserts/dynamic/Person_likes_Post inserts/dynamic/Person_studyAt_University inserts/dynamic/Person_workAt_Company inserts/dynamic/Post inserts/dynamic/Post_hasCreator_Person inserts/dynamic/Post_hasTag_Tag inserts/dynamic/Post_isLocatedIn_Country initial_snapshot/dynamic/Comment initial_snapshot/dynamic/Comment_hasCreator_Person initial_snapshot/dynamic/Comment_hasTag_Tag initial_snapshot/dynamic/Comment_isLocatedIn_Country initial_snapshot/dynamic/Comment_replyOf_Comment initial_snapshot/dynamic/Comment_replyOf_Post initial_snapshot/dynamic/Forum initial_snapshot/dynamic/Forum_containerOf_Post initial_snapshot/dynamic/Forum_hasMember_Person initial_snapshot/dynamic/Forum_hasModerator_Person initial_snapshot/dynamic/Forum_hasTag_Tag initial_snapshot/dynamic/Person initial_snapshot/dynamic/Person_hasInterest_Tag initial_snapshot/dynamic/Person_isLocatedIn_City initial_snapshot/dynamic/Person_knows_Person initial_snapshot/dynamic/Person_likes_Comment initial_snapshot/dynamic/Person_likes_Post initial_snapshot/dynamic/Person_studyAt_University initial_snapshot/dynamic/Person_workAt_Company initial_snapshot/dynamic/Post initial_snapshot/dynamic/Post_hasCreator_Person initial_snapshot/dynamic/Post_hasTag_Tag initial_snapshot/dynamic/Post_isLocatedIn_Country initial_snapshot/static/Organisation initial_snapshot/static/Organisation_isLocatedIn_Place initial_snapshot/static/Place initial_snapshot/static/Place_isPartOf_Place initial_snapshot/static/Tag initial_snapshot/static/TagClass initial_snapshot/static/TagClass_isSubclassOf_TagClass initial_snapshot/static/Tag_hasType_TagClass; do
    echo -n "${dir} "
    find ${dir} -name '*.csv.gz' | xargs zcat | tail -n +2 | wc -l
done
